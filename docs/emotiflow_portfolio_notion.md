# EmotiFlow - ê°ì • ì¼ê¸° ì•± ê°œë°œ í¬íŠ¸í´ë¦¬ì˜¤ (Notion í…œí”Œë¦¿ í˜•ì‹)

## ğŸ“Œ í”„ë¡œì íŠ¸ í•œ ì¤„ ìš”ì•½

**EmotiFlow**ëŠ” ì‚¬ìš©ìì˜ ê°ì •ì„ ê¸°ë¡í•˜ë©´ AIê°€ í•¨ê»˜ ì§ˆë¬¸í•˜ê³  ìœ„ë¡œí•˜ë©°, ê°ì • ê¸°ë°˜ ìŒì•…ì„ ì¶”ì²œí•´ì£¼ëŠ” **Flutter ê¸°ë°˜ ê°ì • ì¼ê¸° ì•±**ì…ë‹ˆë‹¤.  
([Notion í¬íŠ¸í´ë¦¬ì˜¤ í…œí”Œë¦¿](https://colossal-fine-4a0.notion.site/2c8786518e7c81cfb9fac542d9961a20?v=2c8786518e7c810ba792000cbed020f7))

| í•­ëª© | ë‚´ìš© |
|---|---|
| **Skills** | Flutter, Dart, Riverpod, Firebase(Auth/Firestore/Storage), GoRouter, Google Gemini API |
| **ì§„í–‰ ê¸°ê°„** | 2ì£¼ (2024ë…„ 12ì›”) |
| **íŒ€ êµ¬ì„±** | ë‹¨ë… ê°œë°œ |
| **í•œ ì¤„ ì†Œê°œ** | AI ëŒ€í™”ë¡œ ì¼ê¸° ì‘ì„± ì§„ì… ì¥ë²½ì„ ë‚®ì¶”ê³ , ê°ì • ë¶„ì„ê³¼ ìŒì•… ì¶”ì²œê¹Œì§€ ì—°ê²°í•˜ëŠ” ê°ì • ì¼ê¸° ì•± |
| **ë§í¬** | (ì¶”ê°€ ì˜ˆì •) |

**ê°œë°œ ë°©ì‹**: Cursor AI í˜‘ì—…

---

## ğŸ“– í”„ë¡œì íŠ¸ ìƒì„¸ ì„¤ëª…

### í”„ë¡œì íŠ¸ ë°°ê²½
ê°ì • ê¸°ë¡ì€ ìê¸° ì´í•´ì™€ ë©˜íƒˆ ì¼€ì–´ì— ë„ì›€ì´ ë˜ì§€ë§Œ, â€œì–´ë””ì„œë¶€í„° ì¨ì•¼ í• ì§€ ëª¨ë¥´ê² ë‹¤/ë§¤ì¼ ì“°ê¸° ì–´ë µë‹¤â€ ê°™ì€ ì§„ì… ì¥ë²½ ë•Œë¬¸ì— ê¾¸ì¤€íˆ ì´ì–´ì§€ê¸° ì–´ë µìŠµë‹ˆë‹¤. EmotiFlowëŠ” **AIê°€ ë¨¼ì € ì§ˆë¬¸ì„ ë˜ì§€ëŠ” ëŒ€í™”í˜• íë¦„**ìœ¼ë¡œ ê¸°ë¡ ë¶€ë‹´ì„ ì¤„ì´ê³ , ê°ì • ë¶„ì„ê³¼ ìŒì•… ì¶”ì²œê¹Œì§€ í•œ ê³³ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆìŠµë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **ë‚®ì€ ì§„ì… ì¥ë²½**: AI ì§ˆë¬¸ ê¸°ë°˜ìœ¼ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ê¸°ë¡ ì‹œì‘
- **ê°ì • ì¸ì‹/ì •ë¦¬**: ì¼ê¸° ê¸°ë°˜ ê°ì • ë¶„ì„ê³¼ íŒ¨í„´ ì¸ì‚¬ì´íŠ¸ ì œê³µ
- **ê°œì¸í™”ëœ ìœ„ë¡œ**: ê°ì • ìƒíƒœì— ë§ì¶˜ ìŒì•… ì¶”ì²œ ë° ì¡°ì–¸ ì œê³µ
- **ë°ì´í„° ê¸°ë°˜ ì¸ì‚¬ì´íŠ¸**: ê°ì • íŠ¸ë Œë“œ/í†µê³„ ì‹œê°í™”ë¡œ ìê¸° ì´í•´ ê°•í™”

### ì£¼ìš” ê¸°ëŠ¥
1. **AI ëŒ€í™”í˜• ì¼ê¸° ì‘ì„±**: ì§ˆë¬¸-ì‘ë‹µ íë¦„ìœ¼ë¡œ ì¼ê¸° ì‘ì„± ìœ ë„
2. **ììœ í˜• ì¼ê¸° ì‘ì„±**: í…ìŠ¤íŠ¸/ì´ë¯¸ì§€/ê·¸ë¦¼ ë“± ë‹¤ì–‘í•œ í˜•íƒœ ê¸°ë¡
3. **ì¼ê¸° ê´€ë¦¬(ê²€ìƒ‰/í•„í„°)**: ëª©ë¡ ê¸°ë°˜ ì¡°íšŒ ë° ì¡°ê±´ íƒìƒ‰
4. **ê°ì • ë¶„ì„ ë° ì¡°ì–¸**: ì‘ì„± ë‚´ìš© ê¸°ë°˜ ê°ì • ìš”ì•½ê³¼ ì½”ë©˜íŠ¸ ì œê³µ
5. **ê°ì • ê¸°ë°˜ ìŒì•… ì¶”ì²œ**: ê°ì • ìƒíƒœì— ë§ì¶˜ ìŒì•…/í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì¶”ì²œ
6. **ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ**: Material 3 ê¸°ë°˜ í…Œë§ˆ ì¼ê´€ì„±

### í•µì‹¬ í˜ì´ì§€(ìš”êµ¬ì‚¬í•­ ê¸°ì¤€)
- **ì¼ê¸° ì‘ì„±**: `/diary/chat-write`, `/diary/free-write`
- **ì¼ê¸° ê´€ë¦¬**: `/diary/list`, `/diary/detail/:id`, `/diary/edit/:id`
- **AI ë¶„ì„/ì¡°ì–¸**: `/ai/analysis`, `/ai/advice`
- **ìŒì•…**: `/music/emotion-bgm`

### ê¸°ìˆ ì  ë„ì „ ê³¼ì œ
- **ì‹¤ì‹œê°„ ë°ì´í„°(Firestore) + ë¡œì»¬ UI ìƒíƒœ ì¶©ëŒ**: ê²€ìƒ‰/í•„í„°/ì‚­ì œëª¨ë“œ ê°™ì€ UI ìƒíƒœì™€ ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ì˜ ë¶„ë¦¬ í•„ìš”
- **AI ì‘ë‹µ í’ˆì§ˆ/ì¼ê´€ì„±**: í†¤Â·ê¸¸ì´Â·í›„ì† ì§ˆë¬¸ ìˆ˜ ë“± ì‘ë‹µ ê·œì¹™ì„ ì•ˆì •ì ìœ¼ë¡œ ë§ì¶”ëŠ” ë¬¸ì œ
- **ìƒíƒœ ê´€ë¦¬ ë³µì¡ì„±**: í™”ë©´ ìƒíƒœ(ëª¨ë“œ)ì™€ ë°ì´í„° ìƒíƒœ(ìŠ¤íŠ¸ë¦¼/ìºì‹œ)ì˜ ê²½ê³„ë¥¼ ëª…í™•íˆ ë‚˜ëˆ„ëŠ” ì„¤ê³„

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ / êµ¬ì¡° ì„¤ëª…

### ì „ì²´ êµ¬ì¡°(ìš”ì•½)
- **Feature-based ëª¨ë“ˆí™” + MVVM + Riverpod** ì¤‘ì‹¬ìœ¼ë¡œ í™”ë©´ê³¼ ìƒíƒœë¥¼ ë¶„ë¦¬
- Firebase(Stream) ë°ì´í„°ëŠ” Providerë¡œ í˜ë¦¬ê³ , í™”ë©´ì˜ UI ëª¨ë“œëŠ” ë³„ë„ ìƒíƒœë¡œ ê´€ë¦¬

---

## ğŸ‘¤ ë‚˜ì˜ ì—­í•  ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—­í• ** | í’€ìŠ¤íƒ ê°œë°œ (í”„ë¡ íŠ¸ì—”ë“œ + Firebase ì—°ë™) |
| **ë‹´ë‹¹ ê¸°ëŠ¥** | ì¼ê¸° CRUD, AI ëŒ€í™”í˜• ì¼ê¸°, ê²€ìƒ‰/í•„í„°, í…Œë§ˆ ì‹œìŠ¤í…œ, ì¸ì¦ |
| **ê¸°ìˆ  ìŠ¤íƒ** | Flutter, Dart, Firebase, Riverpod, GoRouter, Google Gemini API |
| **ë¬¸ì„œí™”** | ìš”êµ¬ì‚¬í•­/IA/í˜ì´ì§€ ì •ì˜/ê¸°ëŠ¥ ëª…ì„¸/UX ê°€ì´ë“œ ì‘ì„± |

---

## ğŸ”§ ê¸°ëŠ¥ ë‹¨ìœ„ ìƒì„¸

### 1. ì¸ì¦(Google ë¡œê·¸ì¸) + ì‚¬ìš©ì ì •ë³´ ì €ì¥

#### ê¸°ëŠ¥ ì†Œê°œ
Firebase Authentication ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ê³ , ì‚¬ìš©ì ì •ë³´ë¥¼ Firestoreì— ì €ì¥í•´ ì•±ì˜ ë°ì´í„° í”Œë¡œìš°ë¥¼ ì•ˆì •í™”í–ˆìŠµë‹ˆë‹¤.

#### ë¬¸ì œ
- ì†Œì…œ ë¡œê·¸ì¸ê³¼ Firebase ì¸ì¦ ìƒíƒœë¥¼ í•¨ê»˜ ë§ì¶°ì•¼ í•¨
- ì„¤ì • ì‹¤ìˆ˜(ì˜ˆ: SHA-1)ë¡œ ì¸í•œ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ê°€ ìì£¼ ë°œìƒ

#### í•´ê²°(í•µì‹¬ ì ‘ê·¼)
- ë¡œê·¸ì¸ ë‹¨ê³„ë¥¼ ëª…í™•íˆ ë¶„ë¦¬(ê³„ì • ì„ íƒ â†’ Firebase ì¸ì¦ â†’ ì‚¬ìš©ì ë¬¸ì„œ ì €ì¥)í•˜ê³ , ì‹¤íŒ¨ ì‹œ ì •ë¦¬ ë¡œì§/ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³´ê°•

---

### 2. Firestore ì‹¤ì‹œê°„ ë™ê¸°í™”ì™€ ë¡œì»¬ ìƒíƒœ(ê²€ìƒ‰/í•„í„°/ëª¨ë“œ) ë¶„ë¦¬

#### ê¸°ëŠ¥ ì†Œê°œ
ì¼ê¸° ëª©ë¡ì—ì„œ **Firestore Stream**ê³¼ **UI ìƒíƒœ(ê²€ìƒ‰/í•„í„°/ì‚­ì œ ëª¨ë“œ)**ë¥¼ ë¶„ë¦¬í•´ â€œì‹¤ì‹œê°„ ë™ê¸°í™”â€ì™€ â€œì•ˆì •ì ì¸ UXâ€ë¥¼ ë™ì‹œì— ë§Œì¡±ì‹œí‚¤ë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

#### ë¬¸ì œ
- ìŠ¤íŠ¸ë¦¼ ê°±ì‹ ê³¼ ë¡œì»¬ í•„í„°/ê²€ìƒ‰ì´ ì¶©ëŒí•˜ë©´ í™”ë©´ì´ í”ë“¤ë¦¬ê±°ë‚˜ ë¦¬ë¹Œë“œê°€ ê³¼í•´ì§

#### í•´ê²°(í•µì‹¬ ì ‘ê·¼)
- ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì€ ê·¸ëŒ€ë¡œ í˜ë¦¬ê³ , í™”ë©´ì—ì„œ í•„ìš”í•œ ì¡°ê±´(ê²€ìƒ‰/í•„í„°)ì€ UI ìƒíƒœë¡œ ê´€ë¦¬í•´ ë§ˆì§€ë§‰ ë‹¨ê³„ì—ì„œë§Œ ì ìš©

---

### 3. Gemini API ê¸°ë°˜ ëŒ€í™” UX(í”„ë¡¬í”„íŠ¸ ê·œì¹™ + í´ë°±)

#### ê¸°ëŠ¥ ì†Œê°œ
AI ëŒ€í™”í˜• ì¼ê¸°/ë¶„ì„ì—ì„œ â€œì‘ë‹µ í’ˆì§ˆâ€ê³¼ â€œì‹¤íŒ¨ ì‹œ UXâ€ë¥¼ ì•ˆì •í™”í•˜ê¸° ìœ„í•´ **í”„ë¡¬í”„íŠ¸ ê·œì¹™**ê³¼ **í´ë°± ì‘ë‹µ**ì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

#### ë¬¸ì œ
- AI ì‘ë‹µì˜ í†¤/ê¸¸ì´/ì§ˆë¬¸ ìˆ˜ ì¼ê´€ì„±ì´ ê¹¨ì§€ë©´ UX í’ˆì§ˆì´ í¬ê²Œ í”ë“¤ë¦¼
- ë„¤íŠ¸ì›Œí¬/API ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ëŒ€ê¸°/ì´íƒˆì´ ë°œìƒ

#### í•´ê²°(í•µì‹¬ ì ‘ê·¼)
- ì‘ë‹µ ìŠ¤íƒ€ì¼ ê·œì¹™ì„ ëª…ì‹œí•˜ê³ , ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ í´ë°± ë¬¸êµ¬ë¡œ ì „í™˜í•´ ëŒ€í™” íë¦„ì´ ëŠê¸°ì§€ ì•Šê²Œ ì²˜ë¦¬

---

## ğŸ§© íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

## 1ï¸âƒ£ Google ë¡œê·¸ì¸ ì‹¤íŒ¨ (ApiException: 10 / SHA-1 / OAuth ì„¤ì •)

### ë¬¸ì œ
- ê¸°ê¸°/í™˜ê²½ë³„ë¡œ Google ë¡œê·¸ì¸ì´ ì‹¤íŒ¨í•˜ë©°, ì‚¬ìš©ìì—ê²ŒëŠ” ì›ì¸ì´ ëª¨í˜¸í•˜ê²Œ ë³´ì„

### í•´ê²°
- ë¡œê·¸ì¸ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ì—ì„œ **ì„¤ì • ì´ìŠˆ(ApiException: 10)**ë¥¼ ê°ì§€í•´ ì¹œí™”ì ì¸ ë©”ì‹œì§€ ì œê³µ
- Auth ë‹¨ê³„(ê³„ì • ì„ íƒ â†’ Firebase ì¸ì¦ â†’ Firestore ì €ì¥)ë¥¼ ëª…í™•íˆ í•˜ê³ , ì‹¤íŒ¨ ì‹œ **ë¡œê·¸ì•„ì›ƒ ì •ë¦¬ ë¡œì§**ìœ¼ë¡œ ìƒíƒœ ê¼¬ì„ ë°©ì§€

### â¬…ï¸ Before

```dart
// ì˜ˆ: ì‹¤íŒ¨ ì‹œ ì›ì¸ ì•ˆë‚´ ì—†ì´ "ë¡œê·¸ì¸ ì‹¤íŒ¨"ë§Œ í‘œì‹œ
try {
  await ref.read(authProvider.notifier).signInWithGoogle();
} catch (e) {
  showError('Google ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
}
```

### â¡ï¸ After

```dart
// ë¡œê·¸ì¸ í˜ì´ì§€: ApiException: 10ì„ ê°ì§€í•´ ì•ˆë‚´ ë¬¸êµ¬ ì œê³µ
if (errorMessage.contains('ApiException: 10') || errorMessage.contains('sign_in_failed')) {
  errorMessage = 'ğŸ”§ Google ë¡œê·¸ì¸ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.\n'
               'ê°œë°œìì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.\n'
               '(SHA-1 ì¸ì¦ì„œ ì„¤ì • í•„ìš”)';
}
```

```dart
// AuthService: ì‹¤íŒ¨ ì‹œ ìƒíƒœ ì •ë¦¬ + ì„¤ì • ì›ì¸ ë¡œê·¸ ì¶œë ¥
if (e.toString().contains('ApiException: 10')) {
  print('ğŸ” Google ë¡œê·¸ì¸ ì„¤ì • ë¬¸ì œ:');
  print('   - Firebase Consoleì— SHA-1 í•‘ê±°í”„ë¦°íŠ¸ ì¶”ê°€ í•„ìš”');
  print('   - Google Cloud Consoleì—ì„œ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ì„¤ì • í•„ìš”');
}
await _googleSignIn.signOut(); // ì‹¤íŒ¨ ì‹œ ì •ë¦¬
```

---

## 2ï¸âƒ£ initStateì—ì„œ Provider ì ‘ê·¼/ìƒíƒœ ë³€ê²½ìœ¼ë¡œ ëŸ°íƒ€ì„ ìœ„í—˜

### ë¬¸ì œ
- `initState()`ì—ì„œ `ref.read(...)`ë¡œ ê°’ì„ ì¦‰ì‹œ ì½ê±°ë‚˜ ìƒíƒœë¥¼ ë°”ê¾¸ë©´, ë¹Œë“œ íƒ€ì´ë°ì— ë”°ë¼ **setState/build ì¶©ëŒ** ìœ„í—˜ì´ ìƒê¹€

### í•´ê²°
- `WidgetsBinding.instance.addPostFrameCallback`ë¡œ **ì²« í”„ë ˆì„ ì´í›„**ì— ì´ˆê¸°í™”/ìƒíƒœ ë°˜ì˜ ì²˜ë¦¬

### â¬…ï¸ Before

```dart
@override
void initState() {
  super.initState();
  final mode = ref.read(themeProvider).themeMode;
  setState(() => _selectedThemeMode = mode); // build íƒ€ì´ë°ê³¼ ì¶©ëŒ ê°€ëŠ¥
}
```

### â¡ï¸ After

```dart
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    final currentThemeMode = ref.read(themeProvider).themeMode;
    setState(() => _selectedThemeMode = currentThemeMode);
  });
}
```

---

## 3ï¸âƒ£ Firestore Stream ê°±ì‹ ê³¼ ê²€ìƒ‰/í•„í„° UI ìƒíƒœ ì¶©ëŒ

### ë¬¸ì œ
- ì‹¤ì‹œê°„ Streamì´ ê°±ì‹ ë  ë•Œë§ˆë‹¤ ë¦¬ìŠ¤íŠ¸ê°€ ì¬ë Œë”ë§ë˜ë©°, ê²€ìƒ‰/í•„í„°/ì‚­ì œëª¨ë“œ ê°™ì€ UI ìƒíƒœê°€ í”ë“¤ë¦´ ìˆ˜ ìˆìŒ

### í•´ê²°
- UI ìƒíƒœë¥¼ `DiaryListUiState`ë¡œ ë¶„ë¦¬í•˜ê³ , ê²€ìƒ‰/í•„í„° ì ìš©ì€ `_applySearchAndFilter()`ë¡œ **ë‹¨ì¼ ì§„ì…ì **ì—ì„œ ì²˜ë¦¬

### â¬…ï¸ Before

```dart
// ì˜ˆ: StreamBuilder ë‚´ë¶€ì—ì„œ ê²€ìƒ‰/í•„í„°ë¥¼ ì§ì ‘ ì²˜ë¦¬í•˜ë©´,
// Stream ê°±ì‹  ì‹œë§ˆë‹¤ í•„í„°ë§/ì •ë ¬ ë¡œì§ì´ í”ë“¤ë¦´ ìˆ˜ ìˆìŒ
StreamBuilder(
  stream: firestore.diariesStream(userId),
  builder: (_, snapshot) {
    final docs = snapshot.data?.docs ?? [];
    final filtered = docs.where((d) => d['title'].contains(query)).toList();
    return ListView(...);
  },
);
```

### â¡ï¸ After

```dart
// UI ìƒíƒœ ë¶„ë¦¬
class DiaryListUiState {
  final bool isSearchActive;
  final bool isDeleteMode;
  final Set<String> selectedEntryIds;
  final Map<String, dynamic> currentFilters;
  final String currentSortBy;
  // ...
}
```

```dart
// ê²€ìƒ‰/í•„í„° ì ìš©ì„ ë‹¨ì¼ í•¨ìˆ˜ë¡œ ë¬¶ì–´ ì¼ê´€ëœ ê°±ì‹  íë¦„ ìœ ì§€
void _applySearchAndFilter(DiaryProvider diaryNotifier) {
  final ui = ref.read(diaryListUiProvider);
  final searchQuery = _searchController.text.trim();
  final filters = Map<String, dynamic>.from(ui.currentFilters);
  if (searchQuery.isNotEmpty) filters['search'] = searchQuery;
  filters['sortBy'] = ui.currentSortBy;

  diaryNotifier.searchAndFilter(
    searchQuery: searchQuery,
    filters: filters,
    sortBy: ui.currentSortBy,
  );
}
```

---

## 4ï¸âƒ£ Gemini ì‘ë‹µ í’ˆì§ˆ ë¶ˆì•ˆì • + API í‚¤/ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨ ì‹œ UX ë¶•ê´´

### ë¬¸ì œ
- AI ì‘ë‹µì´ ìƒí™©ì— ë”°ë¼ í†¤/ê¸¸ì´/ì§ˆë¬¸ ìˆ˜ê°€ ë‹¬ë¼ì§€ê³ , API í‚¤ ëˆ„ë½/ë„¤íŠ¸ì›Œí¬ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ê²½í—˜ì´ ëŠê¹€

### í•´ê²°
- í”„ë¡¬í”„íŠ¸ì— **ì‘ë‹µ ê·œì¹™(3~4ë¬¸ì¥, í›„ì† ì§ˆë¬¸ 1ê°œ)**ì„ ëª…ì‹œ
- API í‚¤ê°€ ì—†ê±°ë‚˜ ì‹¤íŒ¨í•˜ë©´ **ì¦‰ì‹œ í´ë°± ì‘ë‹µ** ë°˜í™˜

### â¬…ï¸ Before

```dart
final prompt = 'ì‚¬ìš©ìì—ê²Œ ì§ˆë¬¸í•´ì¤˜: $userResponse';
final response = await callGemini(prompt); // ì‹¤íŒ¨ ì‹œ null/ì˜ˆì™¸ â†’ UX ë¶•ê´´
```

### â¡ï¸ After

```dart
if (!_hasKey) {
  return _getFallbackEmotionQuestion(selectedEmotion);
}

final prompt = '''
ë‹¹ì‹ ì€ ë”°ëœ»í•œ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤.
...
**ì‘ë‹µ ìŠ¤íƒ€ì¼:**
- 3-4ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±
- **í›„ì† ì§ˆë¬¸ì€ ë°˜ë“œì‹œ 1ê°œë§Œ**
''';

final response = await _callGeminiAPI(prompt);
return response ?? _getFallbackEmotionQuestion(selectedEmotion);
```

---

## 5ï¸âƒ£ í…Œë§ˆ ì„¤ì •ì´ ì•± ì¬ì‹¤í–‰ ì‹œ ì´ˆê¸°í™”ë¨ (ì˜ì†í™” í•„ìš”)

### ë¬¸ì œ
- ë‹¤í¬/ë¼ì´íŠ¸, ì»¬ëŸ¬ ë“±ì„ ì„¤ì •í•´ë„ ì•± ì¬ì‹¤í–‰ ì‹œ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒì•„ê°

### í•´ê²°
- `ThemeNotifier`ì—ì„œ SharedPreferencesë¡œ ì €ì¥/ë¡œë“œí•˜ì—¬ **í…Œë§ˆ ì„¤ì • ì˜ì†í™”**

### â¬…ï¸ Before

```dart
// ì˜ˆ: ë©”ëª¨ë¦¬ ìƒíƒœë§Œ ë°”ê¾¸ë©´ ì¬ì‹¤í–‰ ì‹œ ì´ˆê¸°í™”ë¨
state = state.copyWith(themeMode: ThemeMode.dark);
```

### â¡ï¸ After

```dart
Future<void> _loadThemeSettings() async {
  final prefs = await SharedPreferences.getInstance();
  final themeModeIndex = prefs.getInt('theme_mode') ?? 0;
  state = state.copyWith(themeMode: ThemeMode.values[themeModeIndex]);
}

Future<void> setThemeMode(ThemeMode themeMode) async {
  final prefs = await SharedPreferences.getInstance();
  await prefs.setInt('theme_mode', themeMode.index);
  state = state.copyWith(themeMode: themeMode);
}
```

---

## 6ï¸âƒ£ í™ˆ ì§„ì… ì‹œ ìŒì•… ì¶”ì²œ ëª¨ë‹¬ì´ ë°˜ë³µ í‘œì‹œë˜ëŠ” ë¬¸ì œ (ì´ë²¤íŠ¸ ì†Œë¹„)

### ë¬¸ì œ
- â€œì¼ê¸° ì‘ì„±/AI ë¶„ì„ ì´í›„ í™ˆì—ì„œ ìŒì•… ì „í™˜ ì•ˆë‚´â€ ê°™ì€ 1íšŒì„± ì´ë²¤íŠ¸ê°€, ë¦¬ë¹Œë“œë§ˆë‹¤ ë‹¤ì‹œ ì‹¤í–‰ë˜ë©´ ëª¨ë‹¬ì´ ë°˜ë³µ í‘œì‹œë  ìˆ˜ ìˆìŒ

### í•´ê²°
- `pendingMusicPromptProvider`ë¥¼ **ì†Œë¹„(consuming)** í•œ ë’¤ `null`ë¡œ ì´ˆê¸°í™”í•´ 1íšŒì„± ì´ë²¤íŠ¸ ë³´ì¥

### â¬…ï¸ Before

```dart
// ì˜ˆ: ì´ë²¤íŠ¸ë¥¼ ì†Œë¹„í•˜ì§€ ì•Šìœ¼ë©´ build ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì¡°ê±´ì´ ë§Œì¡±ë  ìˆ˜ ìˆìŒ
final pending = ref.read(pendingMusicPromptProvider);
if (pending != null) {
  showModalBottomSheet(...);
}
```

### â¡ï¸ After

```dart
WidgetsBinding.instance.addPostFrameCallback((_) async {
  final pending = ref.read(pendingMusicPromptProvider);
  if (pending != null) {
    final confirm = await showModalBottomSheet<bool>(context: context, builder: (_) => ...);
    // ...
    ref.read(pendingMusicPromptProvider.notifier).state = null; // ì†Œë¹„í•˜ê³  ì´ˆê¸°í™”
  }
});
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| **í”„ë ˆì„ì›Œí¬/ì–¸ì–´** | Flutter, Dart |
| **ìƒíƒœ ê´€ë¦¬** | Riverpod |
| **ë¼ìš°íŒ…** | GoRouter |
| **ë°±ì—”ë“œ** | Firebase (Auth, Firestore, Storage) |
| **AI** | Google Gemini API (Gemini 1.5 Flash) |
| **UI/UX** | Material Design 3 |

---

## ğŸ“Š ì„±ê³¼

### ì •ëŸ‰/ì •ì„± ì§€í‘œ(ìš”ì•½)
- **UX ì•ˆì •ì„±**: ì‹¤ì‹œê°„ ë°ì´í„°ì™€ UI ìƒíƒœ ë¶„ë¦¬ë¡œ í™”ë©´ í”ë“¤ë¦¼/ì¶©ëŒ ê°ì†Œ
- **ê°œë°œ íš¨ìœ¨**: Feature ê¸°ë°˜ ëª¨ë“ˆí™”ë¡œ ê¸°ëŠ¥ ì¶”ê°€/ìˆ˜ì • ì‹œ ì˜í–¥ ë²”ìœ„ë¥¼ ì¶•ì†Œ
- **ì‚¬ìš©ì ê²½í—˜**: AI ì‹¤íŒ¨ ì‹œ í´ë°±ìœ¼ë¡œ ëŒ€í™” íë¦„ ìœ ì§€(ë¬´í•œ ëŒ€ê¸° ë°©ì§€)

---

## ğŸ’­ íšŒê³ 

### ì˜í•œ ì 
1. **ìƒíƒœ ë¶„ë¦¬ ì›ì¹™ì„ ëê¹Œì§€ ìœ ì§€**: ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ì™€ UI ëª¨ë“œë¥¼ ì„ì§€ ì•Šìœ¼ë©´ì„œ ë³µì¡ë„ë¥¼ ë‚®ì¶¤
2. **AI ì—°ë™ì—ì„œ í´ë°± ìš°ì„  ì„¤ê³„**: ì‹¤íŒ¨ë¥¼ ì „ì œë¡œ UXë¥¼ ì„¤ê³„í•´ ì²´ê° í’ˆì§ˆì„ ë†’ì„

### ì•„ì‰¬ìš´ ì 
1. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¶€ì¡±**: Provider/ViewModel ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì¶©ë¶„íˆ í™•ë³´í•˜ì§€ ëª»í•¨

### ê°œì„  ë°©í–¥
1. **ë‹¨ìœ„/ìœ„ì ¯ í…ŒìŠ¤íŠ¸ ë„ì…**: í•µì‹¬ Providerì™€ í™”ë©´ ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸ ì¶”ê°€
2. **ì„±ëŠ¥ ìµœì í™”**: ì´ë¯¸ì§€/ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ë° ìºì‹± ì „ëµ ê³ ë„í™”

---

## ğŸ”— ì°¸ê³  / ë§í¬

- [Notion í¬íŠ¸í´ë¦¬ì˜¤ í…œí”Œë¦¿](https://colossal-fine-4a0.notion.site/2c8786518e7c81cfb9fac542d9961a20?v=2c8786518e7c810ba792000cbed020f7)
- `docs/emotiflow_portfolio.md` (ìƒì„¸ ê¸°ìˆ  í¬íŠ¸í´ë¦¬ì˜¤ ì›ë³¸)
- `docs/core_documents/` (ìš”êµ¬ì‚¬í•­/IA/í˜ì´ì§€ ì •ì˜/ê¸°ëŠ¥ ëª…ì„¸/UX ê°€ì´ë“œ)
- `docs/derived_documents/` (ê¸°ìˆ  ìš”ì•½/í”„ë¡œì íŠ¸ ê³„íš)

---

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 24ì¼  
**ë²„ì „**: v1.0


